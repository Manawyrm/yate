# Makefile
# This file holds the make rules for the Gtk2 client support

# override DEBUG at compile time to enable full debug or remove it all
DEBUG :=

CXX := @CXX@ -Wall
AR  := ar
DEFS:=

INCLUDES:=-I. -I@srcdir@ -I@top_srcdir@ @GTK2_INC@
CXXFLAGS:=$(CXXFLAGS) @MODULE_CPPFLAGS@ @INLINE_FLAGS@
LDFLAGS:= -L../.. -lyate
INCFILES := @top_srcdir@/yateclass.h @top_srcdir@/yatecbase.h @srcdir@/gtk2client.h

PROJECT = libgtk2client.a
SOURCES = gtk2client.cpp
OBJECTS = $(SOURCES:.cpp=.o)

COMPILE = $(CXX) $(DEFS) $(DEBUG) $(INCLUDES) $(CXXFLAGS)

prefix = @prefix@
exec_prefix = @exec_prefix@

# include optional local make rules
-include YateLocal.mak

.PHONY: all debug ddebug xdebug clean
all: $(PROJECT)

debug:
	$(MAKE) all DEBUG=-g3

ddebug:
	$(MAKE) all DEBUG='-g3 -DDEBUG'

xdebug:
	$(MAKE) all DEBUG='-g3 -DXDEBUG'

clean:
	@-$(RM) $(PROJECT) $(OBJECTS) 

$(PROJECT): $(OBJECTS)
	$(AR) rcs $@ $^

%.o: @srcdir@/%.cpp $(INCFILES)
	$(COMPILE) -c $<

Makefile: @srcdir@/Makefile.in @top_builddir@/config.status
	cd @top_builddir@ && ./config.status
